<div class="flex h-full flex-col gap-4">
    <div class="flex flex-row gap-3 items-center mat-subheading-1 mb-0">
        <div class="flex flex-grow">{{ 'updateposts.discussUpdateOnPost' | translate }}</div>
        <div class="text-2xl ws-mat-default-text">
            <ng-container *ngIf="isMobile">
                <div class="text-sm" [routerLink]="['/app/discussion-forum']" [queryParams]="{page: 'home'}">{{ 'updateposts.showAll' | translate }}</div>
            </ng-container>
            <ng-container *ngIf="!isMobile">
                <mat-icon class="cursor-pointer font-bold" *ngIf="!updatesPosts.loadSkeleton" [routerLink]="['/app/discussion-forum']" [queryParams]="{page: 'home', popup: 'show'}">add</mat-icon>
            </ng-container>
        </div>
    </div>
    <ng-container *ngIf="updatesPosts.loadSkeleton">
        <div class="flex flex-col discussion-card gap-3 p-4" *ngFor="let i of [1, 2, 3]">
            <ws-widget-skeleton-loader [bindingClass]="'flex rounded h-6'"></ws-widget-skeleton-loader>
            <ws-widget-skeleton-loader [bindingClass]="'flex rounded h-16'"></ws-widget-skeleton-loader>
        </div>
    </ng-container>

    <div class="flex-1 h-full gap-4" [ngClass]="{'flex flex-col justify-center': updatePosts?.error || !updatesPosts?.data?.length}" *ngIf="!updatesPosts.loadSkeleton">
        <div class="flex flex-col gap-4">
            <ng-container *ngIf="updatesPosts?.data?.length">
                <ng-container *ngFor="let updates of updatesPosts?.data | slice:0:3">
                    <div class="flex flex-col discussion-card gap-2 p-4" *ngIf="updates?.upvotes || updates?.downvotes">
                        <div class="ws-mat-default-text font-semibold">
                            <span *ngIf="updates?.upvotes">
                                {{ updates?.upvotes }} {{ 'updateposts.upvotes' | translate}}
                            </span>
                            <span *ngIf="updates?.upvotes && updates?.downvotes">,&nbsp;</span>
                            <span *ngIf="updates?.downvotes">
                                {{ updates?.downvotes }} {{ 'updateposts.downvotes' | translate}}
                            </span>
                        </div>
                        <div class="text-base">{{ updates?.topic?.title }}</div>
                    </div>
                </ng-container>
            </ng-container>
    
        </div>
       
        
        <ng-container *ngIf="updatesPosts?.data &&  !updatesPosts?.data?.length">
            <div class="flex flex-col items-center gap-4 p-5">
                <img src="assets/icons/home/chat.svg" alt="chat img" />
                <div class="text-sm text-center">{{ 'updateposts.haveQuestions' | translate }}</div>
                <button
                    class="bg-blue-700 text-sm font-semibold text-white py-3 px-5 rounded-full border-none cursor-pointer tracking-wide"
                    [routerLink]="['/app/discussion-forum']" [queryParams]="{page: 'home'}">{{ 'updateposts.startDiscussion' | translate }}</button>
            </div>
        </ng-container>

    </div>
    <ng-container *ngIf="updatesPosts.error">
        <div class="flex flex-col items-center gap-3 p-4">
            <mat-icon class="no-data-found">report_off</mat-icon>
            <div class="mat-subheading-1">{{ 'updateposts.noDataFound' | translate }}</div>
            <div class="text-center">{{ 'updateposts.unableToFetch' | translate }}</div>
        </div>
    </ng-container>
    <ng-container *ngIf="!isMobile && updatesPosts?.data?.length > 3">
        <div class="flex flex-row gap-2 justify-center" *ngIf="!updatesPosts.loadSkeleton && !updatesPosts.error">
            <div class="flex ws-mat-default-text items-center justify-center mat-body-1 cursor-pointer"
                [routerLink]="['/app/discussion-forum']" [queryParams]="{page: 'home'}">
                <div>{{ 'updateposts.showAll' | translate }}</div>
                <mat-icon>
                    chevron_right
                </mat-icon>
            </div>
        </div>
    </ng-container>
</div>